{"version":3,"file":"MainStages.bundle.js","sources":["../src/MainStages.js"],"sourcesContent":["import './style/style.scss'\r\n\r\nexport class MainStages\r\n{\r\n\tconstructor ()\r\n\t{\r\n\t\tthis.points = document.querySelectorAll('.main-stages__point')\r\n\t\tif (this.points.length) {\r\n\t\t\t[].forEach.call(this.points, point => {\r\n\t\t\t\tpoint.addEventListener('click', this.pointClickHandler.bind(this))\r\n\t\t\t})\r\n\r\n\t\t\tdocument.addEventListener('click', this.bodyClickHandler.bind(this))\r\n\t\t}\r\n\t}\r\n\r\n\tpointClickHandler(evt = new Event('click'))\r\n\t{\r\n\t\tconst el = evt.currentTarget || evt.target\r\n\t\tif (el) {\r\n\t\t\tconst isOpen = el.classList.contains('is-active')\r\n\t\t\tthis.closeAllPoints()\r\n\r\n\t\t\tif (!isOpen) {\r\n\t\t\t\tconst popup = el.querySelector('.main-stages__popup')\r\n\t\t\t\tconst num = el.querySelector('.main-stages__num')\r\n\r\n\t\t\t\tel.classList.add('is-active')\r\n\r\n\t\t\t\tif (popup) {\r\n\t\t\t\t\tconst documentWidth = document.body.clientWidth || document.documentElement.clientWidth\r\n\t\t\t\t\tconst windowHeight = window.innerHeight\r\n\t\t\t\t\tconst popupBox = popup.getBoundingClientRect();\r\n\r\n\t\t\t\t\tconst pullRight = popupBox.right > documentWidth\r\n\t\t\t\t\tconst pullBottom = popupBox.bottom > windowHeight\r\n\r\n\t\t\t\t\tif (pullRight) {\r\n\t\t\t\t\t\tpopup.classList.add('pull-right')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (pullBottom) {\r\n\t\t\t\t\t\tpopup.classList.add('pull-bottom')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpopup.classList.add('is-open')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (num)\r\n\t\t\t\t\tnum.classList.add('is-active')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcloseAllPoints()\r\n\t{\r\n\t\t[].forEach.call(this.points, point => {\r\n\t\t\tconst popup = point.querySelector('.main-stages__popup')\r\n\t\t\tconst num = point.querySelector('.main-stages__num')\r\n\r\n\t\t\tif (popup) {\r\n\t\t\t\tpopup.classList.remove('is-open')\r\n\t\t\t\tpopup.classList.remove('pull-right')\r\n\t\t\t\tpopup.classList.remove('pull-bottom')\r\n\t\t\t}\r\n\r\n\t\t\tif (num) {\r\n\t\t\t\tnum.classList.remove('is-active')\r\n\t\t\t}\r\n\r\n\t\t\tpoint.classList.remove('is-active')\r\n\t\t})\r\n\t}\r\n\r\n\tbodyClickHandler(evt = new Event('click'))\r\n\t{\r\n\t\tconst el = evt.target\r\n\t\tif (el && !el.closest('.main-stages__point')) {\r\n\t\t\tthis.closeAllPoints()\r\n\t\t}\r\n\t}\r\n}"],"names":["MainStages","this","points","document","querySelectorAll","length","forEach","call","point","addEventListener","_this","pointClickHandler","bind","bodyClickHandler","_proto","evt","Event","el","currentTarget","target","isOpen","classList","contains","closeAllPoints","popup","querySelector","num","add","documentWidth","body","clientWidth","documentElement","windowHeight","window","innerHeight","popupBox","getBoundingClientRect","pullRight","right","pullBottom","bottom","remove","closest"],"mappings":"iDAEaA,aAEZ,aACA,WACCC,KAAKC,OAASC,SAASC,iBAAiB,uBACpCH,KAAKC,OAAOG,SACf,GAAGC,QAAQC,KAAKN,KAAKC,QAAQ,SAAAM,GAC5BA,EAAMC,iBAAiB,QAASC,EAAKC,kBAAkBC,KAAKF,OAG7DP,SAASM,iBAAiB,QAASR,KAAKY,iBAAiBD,KAAKX,QAE/D,kBAkEA,OAlEAa,EAEDH,kBAAA,SAAkBI,YAAAA,IAAAA,EAAM,IAAIC,MAAM,UAEjC,IAAMC,EAAKF,EAAIG,eAAiBH,EAAII,OACpC,GAAIF,EAAI,CACP,IAAMG,EAASH,EAAGI,UAAUC,SAAS,aAGrC,GAFArB,KAAKsB,kBAEAH,EAAQ,CACZ,IAAMI,EAAQP,EAAGQ,cAAc,uBACzBC,EAAMT,EAAGQ,cAAc,qBAI7B,GAFAR,EAAGI,UAAUM,IAAI,aAEbH,EAAO,CACV,IAAMI,EAAgBzB,SAAS0B,KAAKC,aAAe3B,SAAS4B,gBAAgBD,YACtEE,EAAeC,OAAOC,YACtBC,EAAWX,EAAMY,wBAEjBC,EAAYF,EAASG,MAAQV,EAC7BW,EAAaJ,EAASK,OAASR,EAEjCK,GACHb,EAAMH,UAAUM,IAAI,cAGjBY,GACHf,EAAMH,UAAUM,IAAI,eAGrBH,EAAMH,UAAUM,IAAI,WAGjBD,GACHA,EAAIL,UAAUM,IAAI,gBAGrBb,EAEDS,eAAA,WAEC,GAAGjB,QAAQC,KAAKN,KAAKC,QAAQ,SAAAM,GAC5B,IAAMgB,EAAQhB,EAAMiB,cAAc,uBAC5BC,EAAMlB,EAAMiB,cAAc,qBAE5BD,IACHA,EAAMH,UAAUoB,OAAO,WACvBjB,EAAMH,UAAUoB,OAAO,cACvBjB,EAAMH,UAAUoB,OAAO,gBAGpBf,GACHA,EAAIL,UAAUoB,OAAO,aAGtBjC,EAAMa,UAAUoB,OAAO,iBAExB3B,EAEDD,iBAAA,SAAiBE,YAAAA,IAAAA,EAAM,IAAIC,MAAM,UAEhC,IAAMC,EAAKF,EAAII,OACXF,IAAOA,EAAGyB,QAAQ,wBACrBzC,KAAKsB,mBAEN"}