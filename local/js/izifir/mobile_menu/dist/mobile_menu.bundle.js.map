{"version":3,"file":"mobile_menu.bundle.js","sources":["../src/mobile_menu.js"],"sourcesContent":["import './style/style.scss';\r\nimport {Animate} from \"izifir.animate\";\r\n\r\nexport class MobileMenu\r\n{\r\n  constructor ()\r\n  {\r\n    this.buttons = document.querySelectorAll('[data-toggle-mobile-menu]');\r\n    this.nav = document.querySelector('[data-mobile-nav]');\r\n\t\tthis.next = document.querySelectorAll('[data-mn-next]');\r\n\t\tthis.back = document.querySelector('[data-mn-back]');\r\n\t\tthis.close = document.querySelector('[data-mn-close]');\r\n\r\n    if (this.buttons.length) {\r\n      [].forEach.call(this.buttons, button => {\r\n        button.removeEventListener('click', this.buttonClickHandler);\r\n        button.addEventListener('click', this.buttonClickHandler);\r\n      });\r\n    }\r\n\r\n\t\tif (this.next.length) {\r\n      [].forEach.call(this.next, button => {\r\n        button.removeEventListener('click', this.nextClickHandler.bind(this));\r\n        button.addEventListener('click', this.nextClickHandler.bind(this));\r\n      });\r\n    }\r\n\r\n\t\tif (this.back) {\r\n\t\t\tthis.back.addEventListener('click', this.backClickHandler.bind(this));\r\n\t\t}\r\n\r\n\t\tif (this.close) {\r\n\t\t\tthis.close.addEventListener('click', () => {\r\n\t\t\t\tconsole.log(this.nav);\r\n\t\t\t\tthis.nav.classList.remove('is-open');\r\n\t\t\t});\r\n\t\t}\r\n  }\r\n\r\n\tbackClickHandler(evt)\r\n\t{\r\n\t\tevt.preventDefault();\r\n\t\tconst id = this.back.dataset.backId;\r\n\t\tif (id) {\r\n\t\t\tconst currentMenu = document.querySelector('[data-mn-menu].is-active');\r\n\t\t\tconst menu = document.querySelector(`[data-mn-menu=\"${id}\"]`);\r\n\r\n\t\t\tif (currentMenu && menu) {\r\n\t\t\t\tthis.back.dataset.backId = menu.dataset.mnParent;\r\n\t\t\t\tif (menu.dataset.mnMenu > 0) {\r\n\t\t\t\t\tthis.back.classList.remove('is-hidden');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.back.classList.add('is-hidden');\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeMenu(currentMenu, true);\r\n\t\t\t\tthis.showMenu(menu, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n  buttonClickHandler (evt = new Event('click'))\r\n  {\r\n    evt.preventDefault();\r\n    const el = evt.target || evt.currentTarget;\r\n    const item = el.closest('[data-toggle-mobile-menu]');\r\n    const nav = document.querySelector('[data-mobile-nav=\"' + item.dataset.toggleMobileMenu + '\"]');\r\n\r\n    if (nav.classList.contains('is-open')) {\r\n      nav.classList.remove('is-open');\r\n    } else {\r\n      nav.classList.add('is-open');\r\n    }\r\n  }\r\n\r\n\tnextClickHandler(evt)\r\n\t{\r\n\t\tevt.preventDefault();\r\n\t\tconst el = evt.target;\r\n\t\tconst menu = document.querySelector(`[data-mn-menu=\"${el.dataset.mnNext}\"]`);\r\n\t\tconst currentMenu = document.querySelector('[data-mn-menu].is-active');\r\n\r\n\t\tif (currentMenu && menu) {\r\n\t\t\tthis.back.dataset.backId = menu.dataset.mnParent;\r\n\t\t\tif (menu.dataset.mnMenu > 0) {\r\n\t\t\t\tthis.back.classList.remove('is-hidden');\r\n\t\t\t} else {\r\n\t\t\t\tthis.back.classList.add('is-hidden');\r\n\t\t\t}\r\n\t\t\tthis.closeMenu(currentMenu);\r\n\t\t\tthis.showMenu(menu);\r\n\t\t}\r\n\t}\r\n\r\n\tshowMenu(menu, invert = false)\r\n\t{\r\n\t\tmenu.classList.add('is-active');\r\n\t\tmenu.style.transform = 'translateX(100%)';\r\n\t\tif (invert) {\r\n\t\t\tmenu.style.transform = 'translateX(-100%)';\r\n\t\t}\r\n\t\tconst anim = new Animate({\r\n\t\t\tduration: 300,\r\n\t\t\tstep: function (progress) {\r\n\t\t\t\tlet step = (1 - progress) * 100;\r\n\t\t\t\tif (invert) {\r\n\t\t\t\t\tstep = '-' + step;\r\n\t\t\t\t}\r\n\t\t\t\tmenu.style.transform = 'translateX(' + step +'%)';\r\n\t\t\t},\r\n\t\t});\r\n\t\tanim.run();\r\n\t}\r\n\r\n\tcloseMenu(menu, invert = false)\r\n\t{\r\n\t\tmenu.style.transform = 'translateX(0)';\r\n\t\tconst anim = new Animate({\r\n\t\t\tduration: 300,\r\n\t\t\tstep: function (progress) {\r\n\t\t\t\tlet step = (progress * 100);\r\n\t\t\t\tif (!invert) {\r\n\t\t\t\t\tstep = '-' + step;\r\n\t\t\t\t}\r\n\t\t\t\tmenu.style.transform = 'translateX(' + step +'%)';\r\n\t\t\t},\r\n\t\t\tcomplete()\r\n\t\t\t{\r\n\t\t\t\tmenu.classList.remove('is-active');\r\n\t\t\t}\r\n\t\t});\r\n\t\tanim.run();\r\n\t}\r\n\r\n  /*constructor ()\r\n  {\r\n    this.buttons = document.querySelectorAll('[data-toggle-mobile-menu]')\r\n    this.nav = document.querySelector('[data-mobile-nav]')\r\n    this.parentLinks = document.querySelectorAll('[data-mobile-menu-parent-link]')\r\n\r\n    document.addEventListener('click', this.bodyClickHandler.bind(this))\r\n\r\n    if (this.buttons.length) {\r\n      [].forEach.call(this.buttons, button => {\r\n        button.removeEventListener('click', this.buttonClickHandler)\r\n        button.addEventListener('click', this.buttonClickHandler)\r\n      })\r\n    }\r\n\r\n    if (this.parentLinks.length) {\r\n      [].forEach.call(this.parentLinks, link => {\r\n        link.addEventListener('click', this.parentLinkClickHandler.bind(this))\r\n      })\r\n    }\r\n\r\n    var openLevel = document.querySelectorAll('.menu_link');\r\n\r\n    openLevel.forEach(function (item) {\r\n      item.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        var menuId = this.dataset.id,\r\n          menuParentId = this.dataset.parent,\r\n          menuElem = document.querySelector('.mobile-nav__menu[data-id=\"'+ menuId + '\"]'),\r\n          navigateBut = document.querySelectorAll('.navigate_btn'),\r\n          navigateButId = document.querySelector('.navigate_btn[data-parent=\"'+ menuParentId + '\"]');\r\n\r\n        if (menuElem.classList.contains('.show')) {\r\n          menuElem.classList.remove('show')\r\n        } else {\r\n          menuElem.classList.add('show')\r\n        }\r\n\r\n        navigateBut.forEach(function (item){\r\n          item.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n            menuElem.classList.remove('show')\r\n          })\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  buttonClickHandler(evt = new Event('click')) {\r\n    evt.preventDefault()\r\n    const el = evt.target || evt.currentTarget\r\n    const item = el.closest('[data-toggle-mobile-menu]')\r\n    const nav = document.querySelector('[data-mobile-nav=\"' + item.dataset.toggleMobileMenu + '\"]')\r\n\r\n    if (nav.classList.contains('is-open')) {\r\n      nav.classList.remove('is-open')\r\n    } else {\r\n      nav.classList.add('is-open')\r\n    }\r\n  }\r\n\r\n  parentLinkClickHandler(evt = new Event('click')) {\r\n    evt.preventDefault()\r\n    const el = evt.target || evt.currentTarget\r\n    let link = null\r\n    let root = null\r\n    let inner = null\r\n\r\n    const openMenuList = document.querySelectorAll('[data-mobile-menu-parent-link].is-open')\r\n    if (openMenuList.length) {\r\n      [].forEach.call(openMenuList, openMenu => {\r\n        const root = openMenu.closest('[data-mobile-menu-item]')\r\n        const inner = root.querySelector('[data-mobile-menu-inner]')\r\n\r\n        openMenu.classList.remove('is-open')\r\n        inner.classList.remove('is-open')\r\n      })\r\n    }\r\n\r\n    if (el) {\r\n      link = el.closest('[data-mobile-menu-parent-link]')\r\n      root = el.closest('[data-mobile-menu-item]')\r\n    }\r\n\r\n    if (root) {\r\n      inner = root.querySelector('[data-mobile-menu-inner]')\r\n    }\r\n\r\n    if (inner && link) {\r\n      console.log(inner)\r\n      if (inner.classList.contains('is-open')) {\r\n        link.classList.remove('is-open')\r\n        inner.classList.remove('is-open')\r\n      } else {\r\n        link.classList.add('is-open')\r\n        inner.classList.add('is-open')\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  bodyClickHandler(evt = new Event('click')) {\r\n    const el = evt.target || evt.currentTarget\r\n    const navs = document.querySelectorAll('[data-mobile-nav]')\r\n\r\n    if (el && navs.length) {\r\n      if (!el.closest('[data-toggle-mobile-menu]') && !el.closest('[data-mobile-nav]')) {\r\n        [].forEach.call(navs, nav => {\r\n          nav.classList.remove('is-open')\r\n        })\r\n      }\r\n    }\r\n  }*/\r\n}"],"names":["MobileMenu","this","buttons","document","querySelectorAll","nav","querySelector","next","back","close","length","forEach","call","button","removeEventListener","_this","buttonClickHandler","addEventListener","nextClickHandler","bind","backClickHandler","console","log","classList","remove","_proto","evt","preventDefault","id","dataset","backId","currentMenu","menu","mnParent","mnMenu","add","closeMenu","showMenu","Event","item","target","currentTarget","closest","toggleMobileMenu","contains","el","mnNext","invert","style","transform","Animate","duration","step","progress","run","complete"],"mappings":"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"}