{"version":3,"file":"rating.bundle.js","sources":["../src/rating.js"],"sourcesContent":["import './style/style.scss'\r\nimport 'main.core'\r\n\r\nexport class Rating\r\n{\r\n\tconstructor(options = {name: 'Rating'})\r\n\t{\r\n\t\tthis.init()\r\n\r\n\t\tvar rating = document.querySelector('.rating'),\r\n\t\t\tratingItem = document.querySelectorAll('.rating-item'),\r\n\t\t\tstaticRating = document.querySelector('input[name=\"staticRating\"]');\r\n\r\n\t\tif (!staticRating) {\r\n\t\t\trating.onclick = function(e){\r\n\t\t\t\tvar target = e.target;\r\n\t\t\t\tif(target.classList.contains('rating-item')){\r\n\t\t\t\t\tremoveClass(ratingItem,'current-active')\r\n\t\t\t\t\ttarget.classList.add('active','current-active');\r\n\r\n\t\t\t\t\tdocument.querySelector('input[name=\"rating\"]').value = target.getAttribute('data-rate');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trating.onmouseover = function(e) {\r\n\t\t\t\tvar target = e.target;\r\n\t\t\t\tif(target.classList.contains('rating-item')){\r\n\t\t\t\t\tremoveClass(ratingItem,'active')\r\n\t\t\t\t\ttarget.classList.add('active');\r\n\t\t\t\t\tmouseOverActiveClass(ratingItem)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trating.onmouseout = function(){\r\n\t\t\t\taddClass(ratingItem,'active');\r\n\t\t\t\tmouseOutActiveClas(ratingItem);\r\n\t\t\t}\r\n\r\n\t\t\tfunction removeClass(arr) {\r\n\t\t\t\tfor(var i = 0, iLen = arr.length; i <iLen; i ++) {\r\n\t\t\t\t\tfor(var j = 1; j < arguments.length; j ++) {\r\n\t\t\t\t\t\tratingItem[i].classList.remove(arguments[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction addClass(arr) {\r\n\t\t\t\tfor(var i = 0, iLen = arr.length; i <iLen; i ++) {\r\n\t\t\t\t\tfor(var j = 1; j < arguments.length; j ++) {\r\n\t\t\t\t\t\tratingItem[i].classList.add(arguments[j]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction mouseOverActiveClass(arr){\r\n\t\t\t\tfor(var i = 0, iLen = arr.length; i < iLen; i++) {\r\n\t\t\t\t\tif(arr[i].classList.contains('active')){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tarr[i].classList.add('active');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction mouseOutActiveClas(arr){\r\n\t\t\t\tfor(var i = arr.length-1; i >=1; i--) {\r\n\t\t\t\t\tif(arr[i].classList.contains('current-active')){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tarr[i].classList.remove('active');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinit ()\r\n\t{\r\n\t\tthis.form = document.querySelector('[data-rating-form]')\r\n\r\n\t\tif (this.form) {\r\n\t\t\tthis.submitBtn = this.form.querySelector('[type=\"submit\"]')\r\n\t\t\tthis.form.addEventListener('submit', this.submitFormHandler.bind(this))\r\n\t\t}\r\n\t}\r\n\r\n\tsubmitFormHandler (evt = new Event('submit'))\r\n\t{\r\n\t\tevt.preventDefault()\r\n\r\n\t\tconst formData = new FormData(this.form)\r\n\t\tconst bxFormData = new BX.ajax.FormData()\r\n\t\tconst url = new URL(\"local/ajax/modal/blog_rating.php\", location.origin)\r\n\r\n\r\n\t\tfor (let [name, value] of formData) {\r\n\t\t\tbxFormData.append(name, value)\r\n\t\t}\r\n\r\n\t\turl.searchParams.set('action', 'setRating')\r\n\t\tbxFormData.send(\r\n\t\t\turl.href,\r\n\t\t\tresponse => {\r\n\t\t\t\tif (window.Fancybox) {\r\n\t\t\t\t\tconst instance = window.Fancybox.getInstance()\r\n\t\t\t\t\tif (instance) {\r\n\t\t\t\t\t\tinstance.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tFancybox.show([\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'html',\r\n\t\t\t\t\t\tsrc: response\r\n\t\t\t\t\t}\r\n\t\t\t\t])\r\n\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n}"],"names":["Rating","options","name","this","init","rating","document","querySelector","ratingItem","querySelectorAll","removeClass","arr","i","iLen","length","j","arguments","classList","remove","onclick","e","target","contains","add","value","getAttribute","onmouseover","mouseOverActiveClass","onmouseout","addClass","mouseOutActiveClas","_proto","form","submitBtn","addEventListener","submitFormHandler","bind","evt","Event","preventDefault","formData","FormData","bxFormData","BX","ajax","url","URL","location","origin","append","searchParams","set","send","href","response","window","Fancybox","instance","getInstance","close","show","type","src"],"mappings":"o3BAGaA,aAEZ,WAAYC,YAAAA,IAAAA,EAAU,CAACC,KAAM,WAE5BC,KAAKC,OAEL,IAAIC,EAASC,SAASC,cAAc,WACnCC,EAAaF,SAASG,iBAAiB,gBAGxC,IAFgBH,SAASC,cAAc,8BAEpB,CAAA,IAwBTG,EAAT,SAAqBC,GACpB,IAAI,IAAIC,EAAI,EAAGC,EAAOF,EAAIG,OAAQF,EAAGC,EAAMD,IAC1C,IAAI,IAAIG,EAAI,EAAGA,EAAIC,UAAUF,OAAQC,IACpCP,EAAWI,GAAGK,UAAUC,OAAOF,UAAUD,KA1B5CV,EAAOc,QAAU,SAASC,GACzB,IAAIC,EAASD,EAAEC,OACZA,EAAOJ,UAAUK,SAAS,iBAC5BZ,EAAYF,EAAW,kBACvBa,EAAOJ,UAAUM,IAAI,SAAS,kBAE9BjB,SAASC,cAAc,wBAAwBiB,MAAQH,EAAOI,aAAa,eAI7EpB,EAAOqB,YAAc,SAASN,GAC7B,IAAIC,EAASD,EAAEC,OACZA,EAAOJ,UAAUK,SAAS,iBAC5BZ,EAAYF,EAAW,UACvBa,EAAOJ,UAAUM,IAAI,UAwBvB,SAA8BZ,GAC7B,IAAI,IAAIC,EAAI,EAAGC,EAAOF,EAAIG,OAAQF,EAAIC,IAClCF,EAAIC,GAAGK,UAAUK,SAAS,UADcV,IAI1CD,EAAIC,GAAGK,UAAUM,IAAI,UA5BtBI,CAAqBnB,KAGvBH,EAAOuB,WAAa,YAYpB,SAAkBjB,GACjB,IAAI,IAAIC,EAAI,EAAGC,EAAOF,EAAIG,OAAQF,EAAGC,EAAMD,IAC1C,IAAI,IAAIG,EAAI,EAAGA,EAAIC,UAAUF,OAAQC,IACpCP,EAAWI,GAAGK,UAAUM,IAAIP,UAAUD,IAdxCc,CAASrB,EAAW,UA6BrB,SAA4BG,GAC3B,IAAI,IAAIC,EAAID,EAAIG,OAAO,EAAGF,GAAI,IAC1BD,EAAIC,GAAGK,UAAUK,SAAS,kBADGV,IAI/BD,EAAIC,GAAGK,UAAUC,OAAO,UAjC1BY,CAAmBtB,KAsCrB,kBA6CA,OA7CAuB,EAED3B,KAAA,WAECD,KAAK6B,KAAO1B,SAASC,cAAc,sBAE/BJ,KAAK6B,OACR7B,KAAK8B,UAAY9B,KAAK6B,KAAKzB,cAAc,mBACzCJ,KAAK6B,KAAKE,iBAAiB,SAAU/B,KAAKgC,kBAAkBC,KAAKjC,SAElE4B,EAEDI,kBAAA,SAAmBE,YAAAA,IAAAA,EAAM,IAAIC,MAAM,WAElCD,EAAIE,iBAOJ,IALA,MAAMC,EAAW,IAAIC,SAAStC,KAAK6B,MAC7BU,EAAa,IAAIC,GAAGC,KAAKH,SACzBI,EAAM,IAAIC,IAAI,mCAAoCC,SAASC,YAGvCR,kBAAU,CAAA,cAA1BtC,OAAMsB,OACfkB,EAAWO,OAAO/C,EAAMsB,GAGzBqB,EAAIK,aAAaC,IAAI,SAAU,aAC/BT,EAAWU,KACVP,EAAIQ,MACJ,SAAAC,GACC,GAAIC,OAAOC,SAAU,CACpB,IAAMC,EAAWF,OAAOC,SAASE,cAC7BD,GACHA,EAASE,QAIXH,SAASI,KAAK,CACb,CACCC,KAAM,OACNC,IAAKR,UAMT"}